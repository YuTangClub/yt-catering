<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.yutang.backend.dao.FoodOrdersCustomMapper">
  <resultMap id="BaseResultMap" type="cn.yutang.backend.pojo.po.FoodOrdersCustom">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="or_id" jdbcType="VARCHAR" property="orId" />
    <result column="tb_id" jdbcType="BIGINT" property="tbId" />
    <result column="or_beginTime" jdbcType="TIMESTAMP" property="orBegintime" />
    <result column="or_endTime" jdbcType="TIMESTAMP" property="orEndtime" />
    <result column="or_status" jdbcType="INTEGER" property="orStatus" />
    <result column="or_totalPrice" jdbcType="DOUBLE" property="orTotalprice" />
    <result column="shop_id" jdbcType="INTEGER" property="shopId" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    or_id, tb_id, or_beginTime, or_endTime,or_status, or_totalPrice, shop_id


  </sql>
  <sql id="Where_Clause">
    <where>
      <if test="orderCondition != null">
        shop_id=#{orderCondition.shopId}
        <if test="orderCondition.orBegintime != null and orderCondition.orBegintime != ''">
          and or_endTime >= #{orderCondition.orBegintime}
        </if>
        <if test="orderCondition.orEndtime != null and orderCondition.orEndtime != ''">
          and or_endTime <![CDATA[ <= ]]> #{orderCondition.orEndtime}
        </if>
        <if test="orderCondition.tbId != null and orderCondition.tbId != 0">
          and  tb_id like '%${orderCondition.tbId}%'
        </if>
        <if test="orderCondition.orId != null and orderCondition.orId != ''">
          and  or_id like '%${orderCondition.orId}%'
        </if>
      </if>
    </where>
  </sql>

  <select id="findOrders" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    FROM FoodOrders
    <include refid="Where_Clause"/>
    limit #{page.offset},#{page.limit}
  </select>

  <select id="findCount" resultType="long">
    SELECT COUNT(*) FROM FoodOrders
    <include refid="Where_Clause"/>
  </select>


</mapper>